# Rsync Port 873

Rsync is a fast and efficient tool for copying files both locally and remotely. It can copy files within a machine or between remote hosts. Known for its versatility, Rsync uses a delta-transfer algorithm that reduces the amount of data transmitted by only sending the differences between source files and their existing versions on the destination host. This makes it ideal for backups and mirroring.

## Key Features

- **Delta-Transfer Algorithm**: Only the changes between source and destination files are sent, minimizing data transfer.
- **Versatility**: Can be used for local and remote file copying.
- **Backup and Mirroring**: Commonly used for these purposes due to its efficiency.
- **Port 873**: By default, Rsync uses port 873 but can be configured to use SSH for secure transfers.

## Usage and Abuses

Rsync can be abused in several ways, particularly by listing the contents of shared folders on a target server and retrieving files, sometimes without authentication. When credentials are required, they can often be reused if found during a penetration test, allowing access to sensitive files and potentially remote access to the target.

#### Scanning for Rsync
```shell-session
$ sudo nmap -sV -p 873 127.0.0.1
```

#### Probing for Accessible Shares
```shell-session
$ nc -nv 127.0.0.1 873
```

#### Enumerating an Open Share
```shell-session
$ rsync -av --list-only rsync://127.0.0.1/dev
```

From the above output, we can see a few interesting files that may be worth pulling down to investigate further. We can also see that a directory likely containing SSH keys is accessible. From here, we could sync all files to our attack host with the command `rsync -av rsync://127.0.0.1/dev`. If Rsync is configured to use SSH to transfer files, we could modify our commands to include the `-e ssh` flag, or `-e "ssh -p2222"` if a non-standard port is in use for SSH. This [guide](https://phoenixnap.com/kb/how-to-rsync-over-ssh) is helpful for understanding the syntax for using Rsync over SSH.