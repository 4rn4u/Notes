# Post Exploitation Enumeration

--------------------------------------------------------------------

## Windows

```
sysinfo
shell
hostname
systeminfo
wmic qfe get Caption,Description,HotFixID,InstalledOn`
```

> [!NOTE]
> This information is very useful as it provides us with an idea of what specific version of Windows is running on the target and the updates that have been installed on the target system.

> [!NOTE]
> Why is this important? from the perspective of a penetration tester, we are able to use this information to identify whether the specific version of Windows running on the target is vulnerable to any exploits that can allow us to elevate our privileges or perform lateral movement.


> Some Metasploit Meterpreter Commands / Shell
```
> users and groups:

getuid
getprivs
background
use post/windows/gather/enum_logged_on_users
whoami /priv
net users
net user administrator
net localgroup
net localgroup administrators

> network:

ipconfig
ipconfig /all
route print
netstat -ano

> Services:

ps
pgrep explorer.exe
net start
wmic service list brief
tasklist /SVC
schtasks /query /fo LIST
schtasks /query /fo LIST /v
```

> [!NOTE]
> As shown , the netstat -ano command displays a list of open ports on the target system and their respective state and process ID (PID).

--------------------------------------------------------------------

## Windows JAWS Enum

```
https://github.com/411Hall/JAWS

cd C:\\
mkdir Temp
cd Temp
upload /root/Desktop/jaws-enum.ps1
shell
powershell.exe -ExecutionPolicy Bypass -File .\jaws-enum.ps1 -OutputFilename Jaws-Enum.txt
download JAWS-Enum.txt
```

--------------------------------------------------------------------

## Linux

```
getuid
ifconfig
netstat
route
arp
ps
pgrep vsftpd
/bin/bash -i
cd /root
hostname
cat /etc/*issue
cat /etc/*release
uname -a
dpkg -l
env
lscpu
free -h
df -h
lsblk | grep sd

> Users:

whoami
ls -lah /home
cat /etc/passwd
cat /etc/passwd | grep -v /nologin
groups <USER>
groups root
groups
who
w
last
lastlog

> Services:

ps
ps aux
ps aux | grep msfconsole
ps aux | grep root
top
cat /etc/cron*
crontab -l

> Network:

ifconfig
ip -br -c a
ip a
cat /etc/networks
cat /etc/hostname
cat /etc/hosts
cat /etc/resolv.conf
arp -a
```

--------------------------------------------------------------------

## Metasploit Modules

```
use post/windows/gather/enum_logged_on_users
use post/windows/gather/win_privs
use post/windows/gather/enum_logged_on_users
use post/windows/gather/checkvm
use post/windows/gather/enum_applications
use post/windows/gather/enum_computers
use post/windows/gather/enum_patches
use post/windows/gather/enum_shares
use post/linux/gather/enum_configs
use post/linux/gather/enum_network
use post/linux/gather/enum_system
use post/linux/gather/checkvm
```

--------------------------------------------------------------------

## Auto Enumerate with LinEnum.sh

```
copy code from github linenum

cd /tmp
upload [LinEnum.sh](http://linenum.sh/)
shell
/bin/bash -i
chmod +x [LinEnum.sh](http://linenum.sh/)
./LinEnum.sh
./LinEnum.sh -s -k <keyword> -r <report> -e /tmp/ -t
```

--------------------------------------------------------------------