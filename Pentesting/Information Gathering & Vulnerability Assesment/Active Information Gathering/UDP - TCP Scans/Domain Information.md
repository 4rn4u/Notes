Once we have a basic understanding of the company and its services, we can get an initial impression of its online presence. Suppose a medium-sized company has hired us to test their entire infrastructure from a black-box perspective. This means we have only received a scope of targets and must gather all further information on our own.

The first point of presence on the Internet might be the SSL certificate from the company's main website. Often, such a certificate includes more than just a subdomain, indicating that it is used for several domains that are likely still active.

Another source to find more subdomains is crt.sh, which utilizes Certificate Transparency logs. Certificate Transparency is a process designed to verify issued digital certificates for encrypted Internet connections. The standard (RFC 6962) mandates that all digital certificates issued by a certificate authority be logged in audit-proof logs. This helps detect false or maliciously issued certificates for a domain. SSL certificate providers, like Let's Encrypt, share this information with the crt.sh web interface, which stores new entries in a database for later access.

--> crt.sh

Direction: inlanefreight.com
#### Output in JSON format:
```shell-session
$ curl -s https://crt.sh/\?q\=inlanefreight.com\&output\=json | jq .
```

#### Filtered by unique subdomains:
```shell-session
$ curl -s https://crt.sh/\?q\=inlanefreight.com\&output\=json | jq . | grep name | cut -d":" -f2 | grep -v "CN=" | cut -d'"' -f2 | awk '{gsub(/\\n/,"\n");}1;' | sort -u
```

#### Company Hosted Servers
```shell-session
$ for i in $(cat subdomainlist);do host $i | grep "has address" | grep inlanefreight.com | cut -d" " -f1,4;done
```

### Sodan
**Shodan** can be used to find devices and systems that are permanently connected to the Internet, such as Internet of Things (IoT) devices. It searches the Internet for open TCP/IP ports and filters the systems according to specific terms and criteria. For example, it searches for open HTTP or HTTPS ports, as well as other server ports like FTP, SSH, SNMP, Telnet, RTSP, or SIP. This allows us to find various devices and systems, such as surveillance cameras, servers, smart home systems, industrial controllers, traffic lights and traffic controllers, and other network components.

```shell-session
$ for i in $(cat subdomainlist);do host $i | grep "has address" | grep inlanefreight.com | cut -d" " -f4 >> ip-addresses.txt;done

$ for i in $(cat ip-addresses.txt);do shodan host $i;done
```

### DNS Records
```shell-session
$ dig any inlanefreight.com
```

If we have identified various DNS records, including IP records, mail servers, DNS servers, TXT records, and an SOA record.

- **A records**: These records show the IP addresses that point to a specific (sub)domain. In our case, we see only one, which we already know.
  
- **MX records**: Mail server records indicate which mail server manages the company's emails. In this instance, Google handles the emails, so we can note this and move on.

- **NS records**: These records reveal which name servers are used to resolve the FQDN to IP addresses. Hosting providers typically use their own name servers, making it easier to identify them.

- **TXT records**: This type of record often contains verification keys for various third-party providers and security aspects of DNS, such as SPF, DMARC, and DKIM. These are responsible for verifying and confirming the origin of sent emails. Examining these results closely can provide valuable information.
