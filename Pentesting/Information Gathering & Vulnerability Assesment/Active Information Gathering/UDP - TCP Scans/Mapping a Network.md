# Mapping a Network

> With acces to the network we use sniffing —> passive reconnaissance, watch network traffic

- ARP —> Addres Resolution Protocol (Resolve Ip to MAC)
    - 10.10.1.5 is at 00:0c:29:af:ea:d2

- ICMP —> Internet Control Message Protocol
    - Traceroute
    - Ping
        - Type 8 - echo request


--------------------------------------------------------------------


**MAP HOSTS WITH NMAP:**
```shell-session
$ sudo nmap -sn (ip)
```
> -sn -> not to port scan

```shell-session
$ sudo nmap -sn (ip)/(subnet)
```

```shell-session
$ sudo nmap 10.129.2.0/24 -sn -oA tnet | grep for | cut -d" " -f5
```
> -sn -> Not to port scan
>-oA tnet -> Stores the results in all formats starting with the name 'tnet'.

```
$ nmap -sT -A --top-ports=20 192.168.50.1-253 -oG top-port-sweep.txt
```

```shell-session
$ sudo nmap 10.129.2.0/24 -sn -oA tnet -iL hosts.lst | grep for | cut -d" " -f5
```
>-iL hosts.lst -> Performs defined scans against targets in provided 'hosts.lst' list. (Optional Parameter)

```shell-session
$ sudo nmap -sn -oA tnet 10.129.2.18 10.129.2.19 10.129.2.20| grep for | cut -d" " -f5

$ sudo nmap -sn -oA tnet 10.129.2.18-20| grep for | cut -d" " -f5
```
> For defined ip's
 
```shell-session
$ cat hosts.lst
```
> To print provided hosts on nmap scan



**For a Single ip:**

```shell-session
$ sudo nmap 10.129.2.18 -sn -oA host 
```
> -sn -> Not to port scan
> -oA -> tores the results in all formats starting with the name 'host'

```shell-session
$ sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace 
```
> -sn -> Not to port scan
> -oA -> tores the results in all formats starting with the name 'host'
> -pE  -> Performs the ping scan by using 'ICMP Echo requests' against the target.
> --packet-trace -> Shows all packets sent and received

```shell-session
$ sudo nmap 10.129.2.18 -sn -oA host -PE --reason 
```
> -sn -> Not to port scan
> -oA -> tores the results in all formats starting with the name 'host'
> -pE  -> Performs the ping scan by using 'ICMP Echo requests' against the target.
> --reason -> Displays the reason for specific result

```shell-session
$ sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace --disable-arp-ping 
```


--------------------------------------------------------------------


**NETDISCOVER:**
```shell-session
$ netdiscover -i eth0 -r ip/subnet
```


--------------------------------------------------------------------


**ARP-SCAN:**
```shell-session
$ sudo arp-scan -I eth0 -g 10.10.10.10/24
```
> whireshark —> endpoints


--------------------------------------------------------------------


**FPING:**
```shell-session
$ fping -I eth0 -g 10.10.10.10/24 -a 2>/dev/null (-a —> active)
```